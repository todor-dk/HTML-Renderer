 <!DOCTYPE html>
<!--html5-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
  	<meta charset="utf-8" />

	<title>Arduino Playground - Messenger </title>
	<link rel="shortcut icon" type="image/x-icon" href="https://playground.arduino.cc/favicon.ico" />

	<link rel="stylesheet" href="//content.arduino.cc/legacy/fonts/fonts.css" type="text/css" />
	<link rel="stylesheet" href="//content.arduino.cc/legacy/css/arduino-icons.css">
	<link rel="stylesheet" href="//content.arduino.cc/legacy/css/animation.css"><!--[if IE 7]>
	<link rel="stylesheet" href="//content.arduino.cc/legacy/css/arduino-icons-ie7.css"><![endif]-->
	<!--[if gte IE 9]><!-->
	<link rel='stylesheet' href='//content.arduino.cc/legacy/css/foundation2.css' type='text/css' />
	<![endif]-->
	<!--[if IE 8]>
		<link rel='stylesheet' href='//content.arduino.cc/legacy/css/foundation_ie8.css' type='text/css' />	
	<![endif]-->	
	<link rel='stylesheet' href='//content.arduino.cc/legacy/css/arduino_code_highlight.css' type='text/css' />
	<link rel="stylesheet" type="text/css" media="screen" href="//content.arduino.cc/legacy/css/typeplate.css">
	<link rel='stylesheet' href='//content.arduino.cc/legacy/css/common.css' type='text/css' />	 
	<link rel='stylesheet' href='https://playground.arduino.cc/pub/skins/arduinoWide_SSO/css/arduinoWide_SSO.css?nocache=1' type='text/css' /> 
	<link href="https://plus.google.com/114839908922424087554" rel="publisher" />
	<script src="//content.arduino.cc/legacy/js/vendor/custom.modernizr.js"></script>
</head>
<body>
	<div id="header"></div>
	<div id="menuWings" class="fixed"></div>
	<div id="page">

		<br class="clear"/>

		<!--PageLeftFmt-->
		<div id="pagenav">
			<p><em>The <a class='wikilink' href='https://playground.arduino.cc/Main/HomePage'>playground</a> is a publicly-editable wiki about <a class='urllink' href='http://www.arduino.cc/' rel='nofollow'>Arduino</a>.</em>
</p>
<p class='vspace'></p><p class='sidehead'><a class='wikilink' href='https://playground.arduino.cc/Main/ManualsAndCurriculum'>Manuals and Curriculum</a>
</p>
<p class='vspace'></p><p class='sidehead'><a class='urllink' href='http://arduino.stackexchange.com' rel='nofollow'>Arduino StackExchange</a>
</p>
<p class='vspace'></p><p class='sidehead'><a class='wikilink' href='https://playground.arduino.cc/Main/ArduinoCoreHardware'>Board Setup and Configuration</a>
</p>
<p class='vspace'></p><p class='sidehead'><a class='wikilink' href='https://playground.arduino.cc/Main/DevelopmentTools'>Development Tools</a>
</p>
<p class='vspace'></p><p class='sidehead'> <a class='wikilink' href='https://playground.arduino.cc/Main/ArduinoOnOtherAtmelChips'>Arduino on other Chips</a>
</p>
<p class='vspace'></p><p class='sidehead'><a class='wikilink' href='https://playground.arduino.cc/Main/InterfacingWithHardware'>Interfacing With Hardware</a>
</p><ul><li><a class='wikilink' href='https://playground.arduino.cc/Main/InterfacingWithHardware#Output'>Output</a>
</li><li><a class='wikilink' href='https://playground.arduino.cc/Main/InterfacingWithHardware#InputTOC'>Input</a>
</li><li><a class='wikilink' href='https://playground.arduino.cc/Main/InterfacingWithHardware#ui'>User Interface</a>
</li><li><a class='wikilink' href='https://playground.arduino.cc/Main/InterfacingWithHardware#Storage'>Storage</a>
</li><li><a class='wikilink' href='https://playground.arduino.cc/Main/InterfacingWithHardware#Communication'>Communication</a> 
</li><li><a class='wikilink' href='https://playground.arduino.cc/Main/IntWithHW-PwrSup'>Power supplies</a> 
</li><li><a class='wikilink' href='https://playground.arduino.cc/Main/InterfacingWithHardware#General'>General</a> 
</li></ul><p class='vspace'></p><p class='sidehead'><a class='wikilink' href='https://playground.arduino.cc/Main/InterfacingWithSoftware'>Interfacing with Software</a>
</p>
<p class='vspace'></p><p class='sidehead'><a class='wikilink' href='https://playground.arduino.cc/Main/GeneralCodeLibrary'>User Code Library</a>
</p><ul><li><a class='wikilink' href='https://playground.arduino.cc/Main/SketchList'>Snippets and Sketches</a>
</li><li><a class='wikilink' href='https://playground.arduino.cc/Main/LibraryList'>Libraries</a>
</li><li><a class='wikilink' href='https://playground.arduino.cc/Main/TutorialList'>Tutorials</a>
</li></ul><p class='vspace'></p><p class='sidehead'><a class='urllink' href='https://github.com/arduino/arduino/issues' rel='nofollow'>Suggestions &amp; Bugs</a>
</p>
<p class='vspace'></p><p class='sidehead'><a class='wikilink' href='https://playground.arduino.cc/Main/ElectroInfoResources'>Electronics Technique</a>
</p>
<p class='vspace'></p><p class='sidehead'><a class='wikilink' href='https://playground.arduino.cc/Main/Resources'>Sources for Electronic Parts</a>
</p>
<p class='vspace'></p><p class='sidehead'><a class='wikilink' href='https://playground.arduino.cc/Main/SimilarBoards'>Related Hardware and Initiatives</a>
</p>
<p class='vspace'></p><p class='sidehead'><a class='urllink' href='http://playground.arduino.cc/Main/People' rel='nofollow'>Arduino People/Groups &amp; Sites</a>
</p>
<p class='vspace'></p><p class='sidehead'><a class='urllink' href='http://playground.arduino.cc/Projects/ArduinoUsers' rel='nofollow'>Exhibition</a>
</p>
<p class='vspace'></p><p class='sidehead'><a class='urllink' href='http://playground.arduino.cc/Projects/Ideas' rel='nofollow'>Project Ideas</a>
</p>
<p class='vspace'></p><p class='sidehead'><a class='wikilink' href='https://playground.arduino.cc/Main/Languages'>Languages</a>
</p>
<p class='vspace'></p><hr />
<p class='vspace'></p><p class='sidehead'> <a class='wikilink' href='https://playground.arduino.cc/Main/Participate'>Participate</a>
</p><ul><li><a class='wikilink' href='https://playground.arduino.cc/Main/Participate#contribrules'>Formatting guidelines</a>
</li><li><a class='wikilink' href='https://playground.arduino.cc/Site/AllRecentChanges'>All recent changes</a>
</li><li><a class='wikilink' href='https://playground.arduino.cc/PmWiki/PmWiki'>PmWiki</a>
</li><li><a class='wikilink' href='https://playground.arduino.cc/Main/WikiSandbox'>WikiSandBox training</a>
</li><li><a class='wikilink' href='https://playground.arduino.cc/PmWiki/BasicEditing'>Basic Editing</a>
</li><li><a class='urllink' href='http://www.pmwiki.org/wiki/PmWiki/DocumentationIndex' rel='nofollow'>Documentation index</a>
</li></ul><p class='vspace'></p>

		</div>
		<!--/PageLeftFmt-->

		

		<div id="pagetext" class="playground">
				<!--PageText-->
<div id='wikitext'>
<p>
</p>
<p class='vspace'></p><p  style='text-align: center;'> <span  style='color: #ff0000;'> <span style='font-size:144%'> USE THIS INSTEAD: <a style='color: #ff0000' class='wikilink' href='https://playground.arduino.cc/Code/CmdMessenger'>CmdMessenger</a> </span></span>
</p>
<p class='vspace'></p><pre  style='background-color: #eeeeee; color: #000000; border: 1px dotted black; padding: 2px;'>Messenger library for Arduino
by Thomas Ouellet Fredericks
</pre>
<p class='vspace'></p><h1>Contact </h1>
<ul><li>I prefer you try to contact me through this <a class='urllink' href='http://www.arduino.cc/cgi-bin/yabb2/YaBB.pl?num=1222259218/8' rel='nofollow'>thread</a> on the Arduino forum
</li><li>But if I do not answer, you can email me with questions here: mrtoftrash [at] gmail [dot] com
</li></ul><p class='vspace'></p><h1>Download</h1>
<p><a class='urllink' href='https://playground.arduino.cc/uploads/Code/Messenger.zip' rel='nofollow'>Latest version of Messenger</a> including Max5 and Processing examples
</p>
<p class='vspace'></p><h1>Versions</h1>
<ul><li>1.5 : Added readDouble() as suggested by Lorenzo C.
</li><li>1.4 : Added copyString() and checkString()
</li><li>1.3 : Added readLong() as suggested by G. Paolo Sani
</li><li>1.2 : Modified header file so it compiles in Arduino 12 and up
</li><li>1.1 : Added an attach method for a callback function
</li><li>1.0 : Initial release
</li></ul><p class='vspace'></p><h1>Description</h1>
<p><strong>Messenger</strong> is a "toolkit" that facilitates the parsing of ASCII messages. <strong>Messenger</strong>  buffers characters until it receives a carriage return (CR). It then considers the message complete and available. The message is split into many elements as defined by a separator. The default separator is the space character, but can be any character other than NULL, LF or CR.
</p>
<p class='vspace'></p><h1>Notes</h1>
<ul><li><span  style='color: red;'>Do not</span> use the Arduino IDE's "serial monitor" to test Messenger because it does not send a carriage return and therefore never "completes" sent messages!
</li><li><strong>Messenger</strong>  only provides methods for incoming messages. The internal Serial.print() functions work just fine for outgoing messages.
</li><li>All of your host software code that you designed for <a class='wikilink' href='https://playground.arduino.cc/Code/SimpleMessageSystem'>SimpleMessageSystem</a> should still be compatible with <strong>Messenger</strong>. You will simply have to modify your Arduino code.
</li></ul><p class='vspace'></p><h1>Creation</h1>
<h2>Messenger(byte separator)</h2>
<pre>       -- or --
</pre><h2>Messenger()</h2>
<p>You can create an instance of Messenger by specifying a message separator. 
If you do not specify a separator, the space character will be selected.
</p>
<p class='vspace'></p><h1>General Methods</h1>
<h2>void attach(callbackFuntion)</h2>
<p>Attaches a callback function that is executed once a message is completed. This is the preferred way of working with Messenger (see example at the bottom of this page).
</p>
<p class='vspace'></p><h2>byte process(int serialData)</h2>
<p>Returns true if a message has been completed and is available. Once a message is completed, it will be split into elements that you should be read immediately with  <em>read or string methods</em> because every call to process() erases the completed message if there are any leftover elements.
</p>
<p class='vspace'></p><h2>byte available()</h2>
<p>returns true if there are any elements available in the completed message. You must make a call to process() before using available().
</p>
<p class='vspace'></p><h1>Read Methods</h1>
<p>You must make a call to process() to complete a message before trying to read it's elements. Every time you use a <em>read method</em>, the read element (even if it is not of the proper type) is removed from the completed message and Messenger will point to the next one. Use available() to check if their are any elements left to read.
</p>
<p class='vspace'></p><h2>int readInt()</h2>
<p>Returns the element as an integer. Returns 0 if the element was not a number.
</p>
<p class='vspace'></p><h2>long readLong()</h2>
<p>Returns the element as an long. Returns 0 if the element was not a number.
</p>
<p class='vspace'></p><h2>char readChar()</h2>
<p>Returns the element as a character. If the character is part of a word, the whole word is removed from the completed message. 
</p>
<p class='vspace'></p><h1>String Methods</h1>
<h2>void copyString(char* target, byte maxSize)</h2>
<p>Copies the element as a string into the the array pointed by the <em>target</em> char array. maxSize must match the size of the <em>target</em> char array. The element is removed from the completed message.
</p>
<p class='vspace'></p><h2>byte checkString(char* toCheck)</h2>
<p>Compares the element to the string <em>toCheck</em>. 
</p><ul><li>If there is a match, the method returns true (1) and removes the element from the completed message.
</li><li>If there is no match, the method returns false (0) and <strong>does not</strong> remove the element from the completed message.
</li></ul><p class='vspace'></p><h1>Examples</h1>
<p>Included in the download, you will find examples for Processing and Max5. Here is an example of how you would use Messenger in your Arduino code:
</p>
<p class='vspace'></p><pre  style='background-color: #dddddd; border: 2px dotted white;'>
// This example sets all the values of the digital pins with a list through a callback function 

#include &lt;Messenger.h&gt;
// Instantiate Messenger object with the default separator (the space character)
Messenger message = Messenger(); 

// Create the callback function
void messageReady() {
    int pin = 0;
       // Loop through all the available elements of the message
       while ( message.available() ) {
	// Set the pin as determined by the message
         digitalWrite( pin, message.readInt() );
         pin=pin+1;
      }
}


void setup() {
  // Initiate Serial Communication
  Serial.begin(115200); 
  // Attach the callback function to the Messenger
  message.attach(messageReady);
}


void loop() {
  // The following line is the most effective way of using Serial and Messenger's callback
  while ( Serial.available() )  message.process(Serial.read () );
}
</pre>
<p class='vspace'></p>
</div>


				<!-- AddThis Button Style BEGIN -->
<style>
  .addthis_toolbox {
    margin: 2em 0 1em;
  }
  .addthis_toolbox img {
    float: left;
    height: 25px;
    margin-right: 10px;
    width: auto;
  }
  .addthis_toolbox .social-container {
    float: left;
    height: 27px; 
    width: auto; 
  }
  .addthis_toolbox .social-container .social-content {
    float: left;
    margin-top: 2px;
    max-width: 0;
    overflow: hidden;
    -moz-transition: max-width .3s ease-out;
    -webkit-transition: max-width .3s ease-out;
    -o-transition: max-width .3s ease-out;
    transition: max-width .3s ease-out;
  }
  .addthis_toolbox .social-container:hover .social-content {
    max-width: 100px;
    -moz-transition: max-width .2s ease-in;
    -webkit-transition: max-width .2s ease-in;
    -o-transition: max-width .2s ease-in;
    transition: max-width .2s ease-in;
  }
  .addthis_toolbox .social-container .social-content a {
    float: left;
    margin-right: 5px;
  }

  .addthis_toolbox h3 {
    font-size: 24px;
    text-align: left;
  }
</style>
<!-- AddThis Button Style END -->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style">
  <h3>Share</h3>
  <!-- FACEBOOK -->
  <div class="social-container">
    <img src="/pub/skins/arduinoWide_SSO/img/facebook.png" />
    <div class="social-content">
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    </div>
  </div>
  <!-- TWITTER -->
  <div class="social-container">
    <img src="/pub/skins/arduinoWide_SSO/img/twitter.png">
    <div class="social-content">
      <a class="addthis_button_tweet"></a>
    </div>
  </div>
  <!-- PINTEREST -->
  <div class="social-container">
    <img src="/pub/skins/arduinoWide_SSO/img/pinterest.png">
    <div class="social-content">
      <a class="addthis_button_pinterest_pinit" pi:pinit:url="http://www.addthis.com/features/pinterest" pi:pinit:media="http://www.addthis.com/cms-content/images/features/pinterest-lg.png"></a>
    </div>
  </div>
  <!-- G+ -->
  <div class="social-container">
    <img src="/pub/skins/arduinoWide_SSO/img/gplus.png">
    <div class="social-content">
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    </div>
  </div>

  <script type="text/javascript">var addthis_config = {"data_track_addressbar":false};</script>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-50573fab238b0d34"></script>
</div>
<!-- AddThis Button END -->

			</div> <!-- eof pagetext -->
		
		<br class="clear"/>
		
	</div> <!-- eof page -->
		
	
	<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
	<script src="//content.arduino.cc/legacy/js/foundation.min.js"></script>
	<script>
	  $(document).foundation();
	</script>
	<!--<![endif]-->
	<!--[if IE 8]>
	<script src="//content.arduino.cc/legacy/js/foundation_ie8.min.js"></script>
	<script src="//content.arduino.cc/legacy/js/ie8/jquery.foundation.alerts.js"></script>
	<script src="//content.arduino.cc/legacy/js/app.js"></script>
	<![endif]-->
	
	<script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-22581631-3']);
	  _gaq.push(['_setDomainName', 'arduino.cc']);
	  _gaq.push(['_trackPageview']);
	
	    (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	</script>
    <div>
      <div id="newsletter-modal"></div>
      <div id="footer"></div>
    </div>
    <script src="https://cdn.arduino.cc/header-footer/loader.js" type="text/javascript"></script>
    <script>
      var auth = {
        token: function() {
          return false ? Promise.resolve({
            token: null          }) : Promise.reject('loggedout')
        },
        redirectURI: function() {
          return 'https://auth.arduino.cc/login?client_id=playground&redirect_uri=https%3A%2F%2Fplayground.arduino.cc%2F&state=2080485737&scope=profile%3Acore+profile%3Apublic+profile%3Acontact+offline&response_type=code';
        }
      };
      ArduinoHeaderAndFooter({
        auth: "custom",
        authOptions: auth
      });
    </script>
</body>
</html>
