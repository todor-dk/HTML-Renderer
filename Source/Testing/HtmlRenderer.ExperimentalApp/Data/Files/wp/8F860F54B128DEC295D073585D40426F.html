<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
  <title>WP-MIRROR - Free Software Foundation</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Author" content="Dr. Kent L. Miller" />
  <style>
    h1  {background-color:#99CCFF;text-align:center;}
    h2  {background-color:#FFF0D0;}
    pre {background-color:#e0e0e0;}
  </style>
</head>

<body>
<div id="content">
<h1>WP-MIRROR</h1>

<p>
<img src="wp-mirror.png" alt="wp-mirror logotype"/> 
</p>


<h2>Abstract</h2>


<p>WP-MIRROR is a free utility for building mirrors of any desired set
of <a href="http://wikimediafoundation.org/">Wikimedia Foundation</a>
wikis.</p>


<h2>Which Wikis</h2>


<p>The 
<a href="http://wikimediafoundation.org/">Wikimedia Foundation</a> 
offers wikipedias in nearly 
<a href="http://meta.wikimedia.org/wiki/List_of_Wikipedias">300
languages</a>.  In addition, the WMF has several other projects
(e.g. <a href="http://meta.wikimedia.org/wiki/Wikibooks">wikibooks</a>,
<a href="http://meta.wikimedia.org/wiki/Wiktionary">wiktionary</a>,
etc.) for a total of around 1000 wikis.</p>

<p>WP-MIRROR can build mirrors of any desired set of these wikis.</p>


<h2>Why Build a Mirror</h2>


The main use cases for a mirror are these:

<ul>
<li><b>Development</b>. If you are technically minded and need a
mirror with which you may conduct experiments;</li>
<li><b>Infrastructure</b>. If you need redundancy, or need to serve
pages locally to minimize telecommunications traffic;</li>
<li><b>Offline browsing</b>. If you need off-line access, perhaps for
reasons of mobility, availability, and privacy; and</li>
<li><b>Research</b>. If you need a mirror as a tool to assist your
research on the contents of any given wiki.</li>
</ul>


<h2>Key Features</h2>


<p>WP-MIRROR builds a set of mirrors:</p>

<ul>
<li><b>Appearance</b>. A wiki page rendered by a mirror looks very
similar to the same page rendered by the WMF servers;</li>
<li><b>Behavior</b>. A wiki page rendered by a mirror <i>behaves</i>
almost the same (e.g. edit, search, user account creation, beta
features); and</li>
<li><b>Completeness</b>. Builds a complete mirror with original size
images.</li>
</ul>

<p>WP-MIRROR is easy:</p>

<ul>
<li><b>Easy to install</b>. Available as a DEB package, and is
available from a Debian package repository;</li>
<li><b>Easy to configure</b>. The user may select any desired set of
wikis by editing just one line in a configuration file;</li>
<li><b>Easy to use</b>. Sets up virtual hosts such as 
<a href="http://simple.wikipedia.site/">http://simple.wikipedia.site/<a>,
<a href="http://simple.wiktionary.site/">http://simple.wiktionary.site/<a>,
and
<a href="http://www.wikidata.site/">http://www.wikidata.site/<a>, one
for each wiki in the set, which the user may access with a web
browser; and</li>
<li><b>Robust</b>. Stable even in the face of: corrupt dump files,
corrupt media files, incomplete downloads, Internet access
interruptions, and low disk space; and uses check-pointing to resume
after process interruption.</li>
</ul>

<p>WP-MIRROR automatically configures other software:</p>

<ul>
<li><b>Apache2</b>. Enables the URL rewrite module, and enables
virtual hosts;</li>
<li><b>Cron</b>. Sets up a cron job that updates the mirrors
weekly;</li>
<li><b>MediaWiki</b>. Configures MediaWiki 1.24 and several dozen
extensions; and</li>
<li><b>MySQL</b>. Configures MySQL to achieve an order-of-magnitude
improvement in database performance.</li>
</ul>

<p>WP-MIRROR is free:</p>

<ul>
<li><b>Free software</b>. Software is released under the 
<a href="http://www.fsf.org/licenses">GNU General Public License
(GPLv3)</a>; and</li>
<li><b>Free documentation</b>. Documentation is released under the
<a href="http://www.fsf.org/licenses">GNU Free Documentation License,
Version 1.3</a>.</li>
</ul>


<h2>Out-of-the-box Experience</h2>


<p>WP-MIRROR, by default, builds the following set of mirrors:</p>

<ul>
<li><a href="http://simple.wikipedia.org/">simple wikipedia</a>,</li>
<li><a href="http://simple.wiktionary.org/">simple wiktionary</a>, and</li>
<li><a href="http://www.wikidata.org/">wikidata wiki</a>,</li>
</ul>

<p>where Simple English means shorter sentences, and Wikidata is a
centralized collection of facts usable by all other wikis (e.g. to
populate infoboxes).</p>

<p>The default works <i>out-of-the-box</i> with no user
configuration. It should build in 200ks (two days), occupy 150G of
disk space, be served locally by virtual hosts:
<a href="http://simple.wikipedia.site/">http://simple.wikipedia.site/<a>,
<a href="http://simple.wiktionary.site/">http://simple.wiktionary.site/<a>,
and
<a href="http://www.wikidata.site/">http://www.wikidata.site/<a>, and
update automatically every week.</p>

<p>The default should be suitable for anyone who
learned <a href="http://en.wikipedia.org/wiki/ESL">English as a second
language (ESL)</a>.</p>


<h2>Top Ten Wikipedias</h2>


<p>The top ten wikipedias are the: 
<a href="http://en.wikipedia.org/">en</a>, 
<a href="http://de.wikipedia.org/">de</a>, 
<a href="http://nl.wikipedia.org/">nl</a>, 
<a href="http://fr.wikipedia.org/">fr</a>, 
<a href="http://it.wikipedia.org/">it</a>, 
<a href="http://es.wikipedia.org/">es</a>, 
<a href="http://ru.wikipedia.org/">ru</a>, 
<a href="http://sv.wikipedia.org/">sv</a>, 
<a href="http://pl.wikipedia.org/">pl</a>, and 
<a href="http://ja.wikipedia.org/">ja</a> wikipedias.  Because
WP-MIRROR uses original size media files, the top ten are too large to
fit on a laptop with a single 500G disk, unless the user does not need
the images (and this is configurable).
The <a href="http://en.wikipedia.org/">en wikipedia</a> is the most
demanding case.  It should build in 1Ms (twelve days), occupy 3T of
disk space, be served locally by a virtual host
<a href="http://en.wikipedia.site/">http://en.wikipedia.site/</a>, and
update automatically every month.</p>

<p>Most features are configurable, either through command-line
options, or via a configuration file
(<em>/etc/wp-mirror/local.conf</em>).</p>


<h2>Process</h2> 


<p>WP-MIRROR is non-interactive and normally runs in background as a
weekly cron job, updating the mirror whenever the Wikimedia Foundation
posts new dump files.</p>

<p>WP-MIRROR maintains the state of the mirror in a transactional
database (InnoDB which is the ACID compliant storage engine for
MySQL).  There are three advantages to this:</p>

<ul>
<li><b>Checkpointing</b>.  The state information is Durable (the `D'
in ACID).  When WP-MIRROR is interrupted (e.g. user closes laptop,
power fails, cat walks across keyboard) the state information serves
as a checkpoint.  When WP-MIRROR is next started, it picks up where it
left off.</li>
<li><b>Concurrency</b>.  Multiple instances of WP-MIRROR can run
concurrently.  That is to say, each instance of WP-MIRROR is Isolated
(the `I' in ACID) from every other instance.  The concurrency feature
is intended for desktop use when one is mirroring any of the top ten
wikipedias.</li>
<li><b>Monitoring</b>.  WP-MIRROR can also be run in monitor mode
(concurrently with instances that are building mirrors).  Instances
running in monitor mode display the state of each wikipedia.  If a
suitable windowing system is present, progress bars are rendered using
graphics in a separate window, and otherwise using ASCII characters in
a console (see figures below).</li>
</ul>

<p>WP-MIRROR is designed for robustness.  WP-MIRROR asserts hardware
and software prerequisites, skips over unparsable pages and bad file
names, waits for internet access when needed, and exits gracefully if
disk space runs low.</p>

<p>
<img src="wp-mirror-gui.png"    alt="wp-mirror in monitor mode using gui"/> 
<img src="wp-mirror-screen.png" alt="wp-mirror in monitor mode using screen"/>
</p>


<h2 id="download">Downloading WP-MIRROR</h2>


<p>WP-MIRROR can be found on the main GNU server:
<a href="http://download.savannah.gnu.org/releases/wp-mirror/">http://download.savannah.gnu.org/releases/wp-mirror/</a>
(via HTTP).


<h2 id="documentation">Documentation</h2>


<p><a href="manual/">Documentation for WP-MIRROR</a> is available
online.  The WP-MIRROR Reference Manual is available in PDF format.
If you install from a package, the documentation will be registered
automatically with `doc-base' and readily found using `dhelp' or
`dwww'.</p>

<p>You may also find more information about WP-MIRROR by running
<em>info&nbsp;wp-mirror</em>
or
<em>man&nbsp;wp-mirror</em>,
or by looking at
<em>/usr/share/doc/wp-mirror/</em>,
<em>/usr/local/doc/wp-mirror/</em>,
or similar directories on your system.  A brief summary is available by
running <em>wp-mirror&nbsp;--help</em>.</p>


<h2 id="dependencies">Dependencies</h2>

<p>WP-MIRROR has numerous dependences including: apache2, Image
Magick, MediaWiki, and MySQL.  For this reason, it is easiest for the
user to install WP-MIRROR from a package.</p>

<p>WP-MIRROR 0.7 is available as a DEB package.  It works
`out-of-the-box' on Debian GNU/Linux 7.4 (wheezy) with backports and
Ubuntu 14.04 LTS (trusty).  Porting to other distributions may be
considered for a future release.</p>

<p>WP-MIRROR 0.6 is available as a DEB package.  It works
`out-of-the-box' on Debian GNU/Linux 7.0 (wheezy) and Ubuntu 12.10
(quantal).</p>

<p>WP-MIRROR 0.5 is available as a DEB package.  It works
`out-of-the-box' on Debian GNU/Linux 7.0 (wheezy) and Ubuntu 12.10
(quantal).</p>

<p>WP-MIRROR 0.4 is available as a DEB package.  It works
`out-of-the-box' on Debian GNU/Linux 7.0 (wheezy).</p>

<p>WP-MIRROR 0.3 and earlier versions, were developed on a PC with the
Debian GNU/Linux 6.0 (squeeze) distribution installed.  User
configuration of dependencies is required.</p>

<p>There are no plans to backport WP-MIRROR to earlier
distributions.</p>


<h2 id="installation">Installation</h2>


<h3>Debian GNU/Linux 7.4 (wheezy)</h3>


<h4>Method 1: Install from Debian package repository</h4>


<p>1.1) Import the author's GPG public key into your root-shell's GPG
keyring, and into your APT trusted keyring:</p>

<p><pre>
<span>root-shell# aptitude install gnupg-curl</span>
<span>root-shell# gpg --keyserver zimmermann.mayfirst.org --recv-key 0x320AFC9D382FBD0C</span>
<span>root-shell# gpg --armor --export 0x320AFC9D382FBD0C | apt-key add -</span>
</pre></p>

<p>1.2) Edit /etc/apt/sources.list by appending the `wheezy-backports'
and the `debian-wpmirror' package repositories, like so:</p>

<p><pre>
<span>deb http://ftp.us.debian.org/debian/ wheezy           main</span>
<span>deb http://security.debian.org/      wheezy/updates   main</span>
<span>deb http://ftp.us.debian.org/debian/ wheezy-updates   main</span>
<span>deb http://ftp.us.debian.org/debian/ wheezy-backports main</span>
<span>deb http://download.savannah.gnu.org/releases/wp-mirror/debian-wpmirror/ wheezy main</span>
</pre></p>

<p>If you are building your mirror on an IPv6 only network, then the
last line of /etc/apt/sources.list should instead read:</p>

<p><pre>
<span>deb http://savannah.c3sl.ufpr.br/wp-mirror/debian-wpmirror/ wheezy main</span>
</pre></p>

<p>1.3) Upgrade your Debian distribution:</p>

<p><pre>
<span>root-shell# aptitude update</span>
<span>root-shell# aptitude safe-upgrade</span>
</pre></p>

<p>1.4) Install WP-MIRROR and its dependencies:</p>

<p><pre>
<span>root-shell# aptitude install wp-mirror</span>
</pre></p>

<p>1.5) Run:</p>

<p><pre>
<span>root-shell# wp-mirror --mirror</span>
</pre></p>

<p>WP-MIRROR `just works'. Configuration is entirely automated; and
that includes configuration of dependencies such as `apache2',
`MediaWiki', and `MySQL'.</p>


<h4>Method 2: Download and install DEB packages</h4>


<p>2.1) Releases are found
at <a href="http://download.savannah.gnu.org/releases/wp-mirror/">
http://download.savannah.gnu.org/releases/wp-mirror/</a>.  Select the
most recent DEB packages, and install them in the following order:</p>

<p><pre>
<span>root-shell# dpkg --install mediawiki-mwxml2sql_0.0.2.24-1_amd64.deb</span>
<span>root-shell# dpkg --install wp-mirror-mediawiki_1.24.22-1_all.deb</span>
<span>root-shell# dpkg --install wp-mirror-mediawiki-extensions-math-texvc_1.24.22-1_amd64.deb</span>
<span>root-shell# dpkg --install wp-mirror-mediawiki-extensions_1.24.22-1_all.deb</span>
<span>root-shell# dpkg --install wp-mirror_0.7.4-1_all.deb</span>
</pre></p>

<p>2.2) Run:</p>

<p><pre>
<span>root-shell# wp-mirror --mirror</span>
</pre></p>


<h3>Ubuntu 14.04 LTS (trusty)</h3>


<h4>Method 1: Install from Debian package repository</h4>


<p>1.1) Import the author's GPG public key into your root-shell's GPG
keyring, and into your APT trusted keyring:</p>

<p><pre>
<span>root-shell# apt-get install aptitude</span>
<span>root-shell# aptitude install gnupg-curl</span>
<span>root-shell# gpg --keyserver zimmermann.mayfirst.org --recv-key 0x320AFC9D382FBD0C</span>
<span>root-shell# gpg --armor --export 0x320AFC9D382FBD0C | apt-key add -</span>
</pre></p>

<p>1.2) Edit /etc/apt/sources.list by appending the `debian-wpmirror'
package repositories, like so:</p>

<p><pre>
<span>deb http://download.savannah.gnu.org/releases/wp-mirror/debian-wpmirror/ wheezy main</span>
</pre></p>

<p>If you are building your mirror on an IPv6 only network, then the
last line of /etc/apt/sources.list should instead read:</p>

<p><pre>
<span>deb http://savannah.c3sl.ufpr.br/wp-mirror/debian-wpmirror/ wheezy main</span>
</pre></p>

<p>1.3) Upgrade your Debian distribution:</p>

<p><pre>
<span>root-shell# aptitude update</span>
<span>root-shell# aptitude safe-upgrade</span>
</pre></p>

<p>1.4) Install WP-MIRROR and its dependencies:</p>

<p><pre>
<span>root-shell# aptitude install wp-mirror</span>
</pre></p>

<p>1.5) Run:</p>

<p><pre>
<span>root-shell# wp-mirror --mirror</span>
</pre></p>

<p>WP-MIRROR `just works'. Configuration is entirely automated; and
that includes configuration of dependencies such as `apache2',
`MediaWiki', and `MySQL'.</p>


<h3><a href="installation.html">Debian GNU/Linux 6.0 (squeeze)</a></h3>


<h2 id="mail">Mailing lists</h2>


<p>WP-MIRROR has the following mailing lists:</p>

<p>
<ul>
<li><a
href="https://lists.gnu.org/mailman/listinfo/wp-mirror-announce">wp-mirror-announce</a>
is used to announce releases</li>

<li><a
href="https://lists.gnu.org/mailman/listinfo/wp-mirror-devel">wp-mirror-devel</a>
is a closed list for developers and testers.</li>

<li><a href="https://lists.gnu.org/mailman/listinfo/wp-mirror-list">wp-mirror-list</a>
is used to discuss most aspects of WP-MIRROR (e.g. feature requests
and bug reports).</li>
</ul>
</p>

<h2 id="contribute">Getting involved</h2>

<p>Development of WP-MIRROR, and GNU in general, is a volunteer
effort, and you can contribute.  For information, please read <a
href="http://www.gnu.org/help/">How to help GNU</a>.  If you'd like to
get involved, it's a good idea to join the discussion mailing list
(see above).</p>

<dl>
<dt>Test releases</dt>

<dd>Trying the latest test release (when available) is always
appreciated.  Test releases of
WP-MIRROR
can be found at
<a href="http://download.savannah.gnu.org/releases/wp-mirror/">http://download.savannah.gnu.org/releases/wp-mirror/</a>
(via HTTP).</dd>


<dt>Development</dt>

<dd>For development sources, issue trackers, and other
information, please see the
<a href="http://savannah.gnu.org/projects/wp-mirror/">WP-MIRROR
project page</a>
at <a href="http://savannah.gnu.org">savannah.gnu.org</a>.</dd>


<dt>Translating  WP-MIRROR</dt>

<dd>To translate
WP-MIRROR's
messages into other languages, please see the <a
href="http://translationproject.org/domain/wp-mirror.html">Translation Project
page for
WP-MIRROR</a>.
If you have a new translation of the message strings,
or updates to the existing strings, please have the changes made in this
repository.  Only translations from this site will be incorporated into
WP-MIRROR.
For more information, see the 
<a href="http://translationproject.org/html/welcome.html">Translation
Project</a>.</dd>


<dt>Maintainer</dt>

<dd>WP-MIRROR is currently being maintained by Dr. Kent L. Miller. 
Please use the mailing lists for contact.</dd>


</dl>


<h2 id="license">Licensing</h2>

<p>WP-MIRROR is free software; you can redistribute it and/or modify 
it under the terms of the 
<a href="http://www.gnu.org/licenses/gpl.html"
rel="license">GNU General Public License</a> as published by the Free
Software Foundation; either version&nbsp;3 of the License, or (at your
option) any later version.</p>

<p>
<img src="gplv3-127x51.png" alt="GPLv3 logo"/>
</p>
<hr/>
</div>

<div id="footer">

<p>Please send general FSF &amp; GNU inquiries to <a
href="mailto:gnu@gnu.org">&lt;gnu@gnu.org&gt;</a>.  There are also <a
href="http://www.gnu.org/contact/">other ways to contact</a> the
FSF.</p>

<p>Please send broken links and other corrections or suggestions to <a
href="mailto:wp-mirror-list@nongnu.org">&lt;wp-mirror-list@nongnu.org&gt;</a>.</p>

<p>Please see the <a
href="http://www.gnu.org/server/standards/README.translations.html">Translations
README</a> for information on coordinating and submitting translations
of this article.</p>

<p>Copyright &copy; 2011-2014 Dr. Kent L. Miller.</p>

<p>This page is licensed under a <a rel="license"
href="http://creativecommons.org/licenses/by-nd/3.0/us/">Creative
Commons Attribution-NoDerivs 3.0 United States License</a>.</p>

<p>Updated:
<!-- timestamp start -->
$Date: 2014/11/30 01:00:10 $
<!-- timestamp end -->
</p>
</div>
</body>
</html>
