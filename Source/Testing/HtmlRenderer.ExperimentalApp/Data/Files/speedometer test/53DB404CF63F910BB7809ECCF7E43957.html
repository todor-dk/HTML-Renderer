	<!doctype html>
	<!--[if !IE]>
	<html class="no-js non-ie" lang="en-US"> <![endif]-->
	<!--[if IE 7 ]>
	<html class="no-js ie7" lang="en-US"> <![endif]-->
	<!--[if IE 8 ]>
	<html class="no-js ie8" lang="en-US"> <![endif]-->
	<!--[if IE 9 ]>
	<html class="no-js ie9" lang="en-US"> <![endif]-->
	<!--[if gt IE 9]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->
	<head>

		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<link rel="profile" href="http://gmpg.org/xfn/11"/>
		<link rel="pingback" href="https://ehsanakhgari.org/xmlrpc.php"/>

		<title>Quantum Flow Engineering Newsletter #15 &#8211; Ehsan Akhgari</title>
<link rel='dns-prefetch' href='//s0.wp.com' />
<link rel='dns-prefetch' href='//secure.gravatar.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Ehsan Akhgari &raquo; Feed" href="https://ehsanakhgari.org/feed" />
<link rel="alternate" type="application/rss+xml" title="Ehsan Akhgari &raquo; Comments Feed" href="https://ehsanakhgari.org/comments/feed" />
<link rel="alternate" type="application/rss+xml" title="Ehsan Akhgari &raquo; Quantum Flow Engineering Newsletter #15 Comments Feed" href="https://ehsanakhgari.org/blog/2017-07-07/quantum-flow-engineering-newsletter-15/feed" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/ehsanakhgari.org\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.8"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,56826,8203,55356,56819),0,0),c=j.toDataURL(),b===c&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55358,56794,8205,9794,65039),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55358,56794,8203,9794,65039),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='responsive-style-css'  href='https://ehsanakhgari.org/wp-content/themes/responsive/core/css/style.css?ver=2.7.2' type='text/css' media='all' />
<link rel='stylesheet' id='responsive-media-queries-css'  href='https://ehsanakhgari.org/wp-content/themes/responsive/core/css/responsive.css?ver=2.7.2' type='text/css' media='all' />
<link rel='stylesheet' id='social-logos-css'  href='https://ehsanakhgari.org/wp-content/plugins/jetpack/_inc/social-logos/social-logos.min.css?ver=1' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack_css-css'  href='https://ehsanakhgari.org/wp-content/plugins/jetpack/css/jetpack.css?ver=5.1' type='text/css' media='all' />
<script type='text/javascript' src='https://ehsanakhgari.org/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='https://ehsanakhgari.org/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript' src='https://ehsanakhgari.org/wp-content/themes/responsive/core/js/responsive-modernizr.min.js?ver=2.6.1'></script>
<link rel='https://api.w.org/' href='https://ehsanakhgari.org/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://ehsanakhgari.org/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://ehsanakhgari.org/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Quantum Flow Engineering Newsletter #14' href='https://ehsanakhgari.org/blog/2017-06-23/quantum-flow-engineering-newsletter-14' />
<meta name="generator" content="WordPress 4.8" />
<link rel="canonical" href="https://ehsanakhgari.org/blog/2017-07-07/quantum-flow-engineering-newsletter-15" />
<link rel='shortlink' href='https://wp.me/p2HZDv-ph' />
<link rel="alternate" type="application/json+oembed" href="https://ehsanakhgari.org/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fehsanakhgari.org%2Fblog%2F2017-07-07%2Fquantum-flow-engineering-newsletter-15" />
<link rel="alternate" type="text/xml+oembed" href="https://ehsanakhgari.org/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fehsanakhgari.org%2Fblog%2F2017-07-07%2Fquantum-flow-engineering-newsletter-15&#038;format=xml" />

<link rel='dns-prefetch' href='//v0.wordpress.com'>
<link rel='dns-prefetch' href='//jetpack.wordpress.com'>
<link rel='dns-prefetch' href='//s0.wp.com'>
<link rel='dns-prefetch' href='//s1.wp.com'>
<link rel='dns-prefetch' href='//s2.wp.com'>
<link rel='dns-prefetch' href='//public-api.wordpress.com'>
<link rel='dns-prefetch' href='//0.gravatar.com'>
<link rel='dns-prefetch' href='//1.gravatar.com'>
<link rel='dns-prefetch' href='//2.gravatar.com'>
	<script>
		jQuery(document).ready(function(){
		var copyright_text = "";
		var cyberchimps_link = "";
		var siteurl = "https://ehsanakhgari.org"; 
		if(copyright_text == "")
		{
			jQuery(".copyright #copyright_link").text(" "+"Default copyright text");
		}
		else{ 
			jQuery(".copyright #copyright_link").text(" "+copyright_text);
		}
		jQuery(".copyright #copyright_link").attr('href',siteurl);
		if(cyberchimps_link == 1)
		{
			jQuery(".powered").css("display","block");
		}
		else{
			jQuery(".powered").css("display","none");
		}
		});
	</script>
<!-- We need this for debugging -->
<!-- Responsive 2.7.2 -->

<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="Quantum Flow Engineering Newsletter #15" />
<meta property="og:url" content="https://ehsanakhgari.org/blog/2017-07-07/quantum-flow-engineering-newsletter-15" />
<meta property="og:description" content="Last week many Mozilla developers attended the Mozilla All Hands at San Francisco.  I didn&#8217;t attend the All Hands myself but from the activity on Bugzilla it looks like it was a productive we…" />
<meta property="article:published_time" content="2017-07-07T06:58:32+00:00" />
<meta property="article:modified_time" content="2017-07-07T06:58:32+00:00" />
<meta property="og:site_name" content="Ehsan Akhgari" />
<meta property="og:image" content="https://screenshots.firefoxusercontent.com/images/f582784e-acf7-4645-836e-2a7236024ffd.png" />
<meta property="og:locale" content="en_US" />
<meta name="twitter:card" content="summary" />
	</head>

<body class="post-template-default single single-post postid-1567 single-format-standard">

<div id="container" class="hfeed">

	<div class="skip-container cf">
		<a class="skip-link screen-reader-text focusable" href="#content">&darr; Skip to Main Content</a>
	</div><!-- .skip-container -->
	<div id="header" role="banner">

		
		
		
		
		
			<div id="logo">
				<span class="site-name"><a href="https://ehsanakhgari.org/" title="Ehsan Akhgari" rel="home">Ehsan Akhgari</a></span>
				<span class="site-description"></span>
			</div><!-- end of #logo -->

		
				<div class="main-nav"><ul id="menu-categories" class="menu"><li id="menu-item-156" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-156"><a href="/">Home</a></li>
<li id="menu-item-154" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-154"><a title=" " href="https://ehsanakhgari.org/category/blog">Blog</a></li>
<li id="menu-item-150" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-150"><a title=" " href="https://ehsanakhgari.org/category/article">Articles</a>
<ul  class="sub-menu">
	<li id="menu-item-157" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-157"><a title=" " href="https://ehsanakhgari.org/category/article/visual-c">Visual C++</a></li>
	<li id="menu-item-158" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-158"><a title=" " href="https://ehsanakhgari.org/category/article/php">php</a></li>
	<li id="menu-item-159" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-159"><a title=" " href="https://ehsanakhgari.org/category/article/miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li id="menu-item-155" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-155"><a title=" " href="https://ehsanakhgari.org/category/talks">Talks</a></li>
<li id="menu-item-232" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-232"><a href="/contact">Contact</a></li>
</ul></div>
		
		
	</div><!-- end of #header -->

	<div id="wrapper" class="clearfix">

<div id="content" class="grid col-620" role="main">

	<div class="breadcrumb-list" xmlns:v="http://rdf.data-vocabulary.org/#"><span class="breadcrumb" typeof="v:Breadcrumb"><a rel="v:url" property="v:title" href="https://ehsanakhgari.org/">Home</a></span> <span class="chevron">&#8250;</span> <span class="breadcrumb" typeof="v:Breadcrumb"><a rel="v:url" property="v:title" href="https://ehsanakhgari.org/category/blog">Blog</a></span> <span class="chevron">&#8250;</span> <span class="breadcrumb-current">Quantum Flow Engineering Newsletter #15</span></div>
	
		
						<div id="post-1567" class="post-1567 post type-post status-publish format-standard hentry category-blog tag-mozilla tag-planet tag-quantumflow">
				
				
	<h1 class="entry-title post-title">Quantum Flow Engineering Newsletter #15</h1>

<div class="post-meta">
	<span class="meta-prep meta-prep-author posted">Posted on </span><a href="https://ehsanakhgari.org/blog/2017-07-07/quantum-flow-engineering-newsletter-15" title="Quantum Flow Engineering Newsletter #15" rel="bookmark"><time class="timestamp updated" datetime="2017-07-07T06:58:32+00:00">July 7, 2017</time></a><span class="byline"> by </span><span class="author vcard"><a class="url fn n" href="https://ehsanakhgari.org/author/ehsanak" title="View all posts by ehsan"><span class="author-gravtar"><img alt='' src='https://secure.gravatar.com/avatar/5aef682fbfd7590b9d85d6e8dbab10eb?s=32&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/5aef682fbfd7590b9d85d6e8dbab10eb?s=64&amp;d=mm&amp;r=g 2x' class='avatar avatar-32 photo' height='32' width='32' /></span>ehsan</a></span>
			<span class="comments-link">
		<span class="mdash">&mdash;</span>
			<a href="https://ehsanakhgari.org/blog/2017-07-07/quantum-flow-engineering-newsletter-15#comments">1 Comment &darr;</a>		</span>
	</div><!-- end of .post-meta -->

				<div class="post-entry">
					<p>Last week many Mozilla developers attended the Mozilla All Hands at San Francisco.  I didn&#8217;t attend the All Hands myself but from the activity on Bugzilla it looks like it was a productive week.  🙂  The intention behind the work week this time was to do focused work leveraging the face to face time that people have together with the goal of improving the 57 release.  In the areas that I watch daily these days (mostly Speedometer V2 and [qf:p1] bugs) the focus was really great, and you will see the details in the acknowledgement section at the bottom.  I hope that reflects how the week was for everyone who attended!</p>
<p>There were <a href="http://www.chesnok.com/daily/2017/07/03/runtime-all-hands-june-2017-summary/">26 [qf:p1] bugs fixed during the week</a>, and progress were made on many more others.  A lot of these are tricky bugs often times requiring changes to old or complex code, so this is an impressive number!  There was also some fantastic progress on Speedometer, a lot of improvements landed on the JS engine side, we found a few new issues to work on during measurements, and the work is making progress at a good pace.  Profiling Speedometer has been really interesting, there is so much code that runs under the benchmark that we keep finding new issues as we keep looking at various narrow portions of profiles.  The graphs below show the progress in the last couple of weeks (note the new test runs on PGO builds on the reference hardware!).</p>
<div style="width: 613px" class="wp-caption aligncenter"><a href="https://arewefastyet.com/#machine=35&amp;view=single&amp;suite=speedometer-misc&amp;subtest=score&amp;start=1498121501&amp;end=1499362823"><img class="size-medium" src="https://screenshots.firefoxusercontent.com/images/e2176588-2611-437f-9075-6188a1555056.png" alt="Win 8 64-bit (i7-4700HQ) (score went up from about 97 to 102)" width="603" height="411" /></a><p class="wp-caption-text">Win 8 64-bit (i7-4700HQ)</p></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div style="width: 628px" class="wp-caption aligncenter"><a href="https://arewefastyet.com/#machine=36&amp;view=single&amp;suite=speedometer-misc&amp;subtest=score&amp;start=1498264100&amp;end=1499389808"><img class="size-medium" src="https://screenshots.firefoxusercontent.com/images/f582784e-acf7-4645-836e-2a7236024ffd.png" alt="Score went up from about 68 to 71" width="618" height="378" /></a><p class="wp-caption-text">Quantum Reference (Windows x64)</p></div>
<p>One important performance related project that also landed was <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1362322">budget based background timeout throttling</a>.  This is the initial implementation of the <a href="https://developers.google.com/web/updates/2017/03/background_tabs">heuristic</a> that Chrome shipped for throttling the timeouts running in background tabs based on a budget scheme (which means if a background tab runs too much timers, it will get throttled.)  There is still <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1377766">work</a> remaining to be done before we can enable this feature but but it&#8217;s great to see it get to this stage.  This will be another step we are taking to deal with the issue of background tabs that run too many timeouts.</p>
<p>One final note, next week I will be away on vacation, so once again you can expect the next one of these in two weeks!  With that said, now it&#8217;s time to acknowledge the help of those of you who contributed to making Firefox faster these past two weeks!  I hope I am not forgetting any names by mistake.</p>
<ul>
<li>Olli Pettay <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=833143">made it so that we don’t GC on shutdown</a>, which should help with shutdown speed.  He also made us <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1374416">avoid dispatching a selectionchange event for pages that do not have such a listener registered</a>.  He also <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1376936">made nsContentList stop receiving DOM mutation events when its refcount drops to 0 while it’s waiting for deferred deletion to clean it up</a>.  He also <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1376614">made the forgetSkippable phase of the cycle collector more incremental by honoring the slice budget</a>.  Additionally he <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1375491">made the IME code in the content process only cache properties at animation tick time</a> in order to avoid flushing layout too eagerly.  This was showing up as <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1373023">slowness on Twitter</a>.</li>
<li>Mats Palmgren <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1375331">improved PresArea free list retention strategy for small arrays to avoid malloc/free churns</a>.  He also <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1374875">made media elements use a simpler mutation observer than a heavy-weight Range object</a>.  He also <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1375075">removed a synchronous layout flush from the media elements code</a> which was no longer necessary.</li>
<li>William Chen <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1366241">reordered element and attribute name hashes</a> used in the HTML parser so that the binary search algorithm can be switched to use <a href="http://bannalia.blogspot.ca/2015/06/cache-friendly-binary-search.html">level order</a> to utilize better CPU cache efficiency.  This improves the speed of looking up string names for elements and attributes when parsing HTML.</li>
<li>Jan de Mooij <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1373195">sped up the handling of the unicode ‘.’ character class ranges when parsing regular expressions</a>.  He also <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1364854">optimized Object.assign by porting it from the self-hosted JavaScript implementation to a faster C++ implementation</a>.  He also <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1376961">avoided a TLS lookup for each compartment check</a> and <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1376799">optimized Object.protototype.toString</a>.  He also <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1377238">sped up FinishOffThreadBuilder on multi-core systems</a>, and <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1377489">eliminated some unnecessary copying when converting functions to strings</a>.  He <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1376691">improved the inlining of Array.isArray() in IonMonkey</a>.  Last but not least he enabled <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=627220">finalizing external strings in the background</a>.</li>
<li>André Bargull made us <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1371593">avoid repeated string atomizations when retrieving the unresolved name of a bound function</a>.  He also added an opportunistic optimization for <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1367779">avoiding memory allocations during case conversions of inline strings</a>.</li>
<li>Ryan Hunt landed the initial implementation of <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1351783">asynchronous scrolling using keyboard events</a>.  This is currently disabled by default, pending <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1376525">being turned on</a> when the remaining dependencies get resolved.</li>
<li>Milan Sreckovic relanded Gerald Squelart’s fix for <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1337062">removing the PContent::Msg_GetGfxVars sync IPC</a> after fixing the race conditions in the original patch.  He also relanded Gerald’s fix for <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1337063">removing the PContent::Msg_GetGraphicsDeviceInitData sync IPC message</a>.</li>
<li>Kan-Ru Chen made us <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1353731">attempt to reset the timer only once per osfile.reset_worker_delay</a>.</li>
<li>Gijs Kruitbosch <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1374691">avoided instantiating the panelview and panelmultiview XBL bindings while opening a browser window</a>.</li>
<li>Perry Jiang <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=862178">removed the main-thread IO from CrashSubmit.jsm and KeyValueParser.jsm</a>.</li>
<li>Ray Lin <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1373537">removed synchronous layout flushes from the built-in &lt;video&gt; controls when they’re being constructed</a>.</li>
<li>Ting-Yu Chou <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1348099">added a cache for properties not present on DOM Xray wrappers in order to speed up looking up non-existent properties on such wrappers</a>.  This is part of the ongoing work to improve the speed of accessing web page content from privileged JS code, as commonly done by WebExtensions that need to interact with pages and also similar browser features implemented in JS.</li>
<li>Michael Layzell <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1343728">got rid of the PContent::Msg_CreateWindow sync IPC message</a>!  He also <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1350633">removed the PBrowser::Msg_GetWidgetNativeData sync IPC message</a>.  He also <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1365309">enabled collecting native backtraces for Background Hang Reports on Linux on Nightly</a>.  He also fixed <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1374665">a recent performance regression caused by sending down permissions to a newly created content process</a>.</li>
<li>Evelyn Hung made it so that <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1348275">we start speculative connection</a> when autocompleting in the AwesomeBar.</li>
<li>JW Wang made it so that <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1377025">we can’t block the main thread when acquiring a lock inside VideoFrameContainer::InvalidateWithFlags</a> by getting rid of the mutex entirely.</li>
<li>Andreas Farre added <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1362322">budget-based background timeout throttling</a> to help smooth our random jank that might occur from background timers running in the browser.</li>
<li>Alessio Placitelli <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1369734">moved the telemetry session pings to the idle queue after the sleep-wake or idle-active cycles</a>.</li>
<li>Cervantes Yu <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1375281">made telemetry collect information about the amount of allocated heap asynchronously</a>.</li>
<li>Bao Quan <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1362330">ported the code responsible for creating XPath expressions for session restore to C++</a>.  This helps improve the performance of this code, and reduce the amount of GC pressure caused as a result of the code running.</li>
<li>Florian Quèze <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1378171">added a test for keeping track of the JS components and modules that get loaded during content process startup</a> to prevent gradual slowdown of startup in the content process by adding unintended dependencies to the critical path.  He also <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1034599">converted the remaining Promise.defer() uses in the front-end code to either  use PromiseUtils.defer() or new Promise()</a>.</li>
<li>Boris Zbarsky <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1376954">made the JS wrapper object for DOM NodeList objects to be allocated in the incremental collector’s nursuery</a>.  This allows these wrapper objects to be collected incrementally in case the web page script doesn’t store a long-living reference to them.</li>
<li>Milind L. <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1107364">replaced the findNodeByDetails method with a faster map of nodes by details</a> to speed up the lookups.</li>
<li>Thomas Nguyen <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1363163">moved the Windows UI sound player backend to run on a background thread</a> to avoid janking the main thread.  This is the code that plays system sounds in response to user interactions with the browser UI.</li>
<li>Ben Kelly <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1375287">avoided hashtable lookups to read an almost static preference when Window.setTimeout()/setInterval() is called</a>.</li>
<li>Samael Wang <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1362166">enabled IPDL timeout for communicating with the GPU process</a>, to enable recovering from cases where the GPU process is too slow to respond to messages.</li>
<li>Marco Bonardo <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1095425">converted PlacesTransaction to the new asynchronous Bookmarks.jsm API</a>.</li>
</ul>
<div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><h3 class="sd-title">Share this:</h3><div class="sd-content"><ul><li class="share-email"><a rel="nofollow" data-shared="" class="share-email sd-button share-icon" href="https://ehsanakhgari.org/blog/2017-07-07/quantum-flow-engineering-newsletter-15?share=email" target="_blank" title="Click to email this to a friend"><span>Email</span></a></li><li class="share-reddit"><a rel="nofollow" data-shared="" class="share-reddit sd-button share-icon" href="https://ehsanakhgari.org/blog/2017-07-07/quantum-flow-engineering-newsletter-15?share=reddit" target="_blank" title="Click to share on Reddit"><span>Reddit</span></a></li><li class="share-twitter"><a rel="nofollow" data-shared="sharing-twitter-1567" class="share-twitter sd-button share-icon" href="https://ehsanakhgari.org/blog/2017-07-07/quantum-flow-engineering-newsletter-15?share=twitter" target="_blank" title="Click to share on Twitter"><span>Twitter</span></a></li><li class="share-facebook"><a rel="nofollow" data-shared="sharing-facebook-1567" class="share-facebook sd-button share-icon" href="https://ehsanakhgari.org/blog/2017-07-07/quantum-flow-engineering-newsletter-15?share=facebook" target="_blank" title="Click to share on Facebook"><span>Facebook</span></a></li><li class="share-google-plus-1"><a rel="nofollow" data-shared="sharing-google-1567" class="share-google-plus-1 sd-button share-icon" href="https://ehsanakhgari.org/blog/2017-07-07/quantum-flow-engineering-newsletter-15?share=google-plus-1" target="_blank" title="Click to share on Google+"><span>Google</span></a></li><li class="share-end"></li></ul></div></div></div>
					
									</div><!-- end of .post-entry -->

				<div class="navigation">
					<div class="previous">&#8249; <a href="https://ehsanakhgari.org/blog/2017-06-23/quantum-flow-engineering-newsletter-14" rel="prev">Quantum Flow Engineering Newsletter #14</a></div>
					<div class="next"></div>
				</div><!-- end of .navigation -->

				
	<div class="post-data">
		Posted in <a href="https://ehsanakhgari.org/category/blog">Blog</a>		Tagged with: <a href="https://ehsanakhgari.org/tag/mozilla" rel="tag">mozilla</a>, <a href="https://ehsanakhgari.org/tag/planet" rel="tag">planet</a>, <a href="https://ehsanakhgari.org/tag/quantumflow" rel="tag">quantumflow</a><br />	</div><!-- end of .post-data -->

<div class="post-edit"></div>
							</div><!-- end of #post-1567 -->
			
						
	<h6 id="comments">
		One comment on &ldquo;<span>Quantum Flow Engineering Newsletter #15</span>&rdquo;	</h6>

	
	<ol class="commentlist">
				<li class="comment even thread-even depth-1" id="comment-3558">
				<div id="div-comment-3558" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/13f8a0b49f6cf119bd3704751eae9a43?s=60&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/13f8a0b49f6cf119bd3704751eae9a43?s=120&amp;d=mm&amp;r=g 2x' class='avatar avatar-60 photo' height='60' width='60' />			<cite class="fn">Gerd</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://ehsanakhgari.org/blog/2017-07-07/quantum-flow-engineering-newsletter-15#comment-3558">
			July 7, 2017 at 8:04 am</a>		</div>

		<p>Really impressive work. Using Nightly, the whole UI feels sooo fast now 🙂 And we&#8217;re are talking about differences between Firefox 55 and 56 in my case, that&#8217;s just about 6 weeks work&#8230; </p>
<p>Have a nice and deserved vacation 🙂</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://ehsanakhgari.org/blog/2017-07-07/quantum-flow-engineering-newsletter-15?replytocom=3558#respond' onclick='return addComment.moveForm( "div-comment-3558", "3558", "respond", "1567" )' aria-label='Reply to Gerd'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
	</ol>

	



	
		<div id="respond" class="comment-respond">
							<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/blog/2017-07-07/quantum-flow-engineering-newsletter-15#respond" style="display:none;">Cancel reply</a></small></h3>
						<form id="commentform" class="comment-form">
				<iframe src="https://jetpack.wordpress.com/jetpack-comment/?blogid=40037709&#038;postid=1567&#038;comment_registration=0&#038;require_name_email=1&#038;stc_enabled=1&#038;stb_enabled=1&#038;show_avatars=1&#038;avatar_default=mystery&#038;greeting=Leave+a+Reply&#038;greeting_reply=Leave+a+Reply+to+%25s&#038;color_scheme=light&#038;lang=en_US&#038;jetpack_version=5.1&#038;sig=83a89d06aca17a08e1e72307671864af50805f12#parent=https%3A%2F%2Fehsanakhgari.org%2Fblog%2F2017-07-07%2Fquantum-flow-engineering-newsletter-15" style="width:100%; height: 430px; border:0;" name="jetpack_remote_comment" class="jetpack_remote_comment" id="jetpack_remote_comment"></iframe>
				<!--[if !IE]><!-->
				<script>
					document.addEventListener( 'DOMContentLoaded', function () {
						var commentForms = document.getElementsByClassName( 'jetpack_remote_comment' );
						for ( var i = 0; i < commentForms.length; i++ ) {
							commentForms[i].allowTransparency = false;
							commentForms[i].scrolling = 'no';
						}
					} );
				</script>
				<!--<![endif]-->
			</form>
		</div>

		
		<input type="hidden" name="comment_parent" id="comment_parent" value="" />

		

			
		
</div><!-- end of #content -->


	<div id="widgets" class="grid col-300 fit" role="complementary">
		
		<div id="search-2" class="widget-wrapper widget_search"><form method="get" id="searchform" action="https://ehsanakhgari.org/">
	<label class="screen-reader-text" for="s">Search for:</label>
	<input type="text" class="field" name="s" id="s" placeholder="search here &hellip;" />
	<input type="submit" class="submit" name="submit" id="searchsubmit" value="Go" />
</form>
</div>		<div id="recent-posts-2" class="widget-wrapper widget_recent_entries">		<div class="widget-title"><h3>Recent Posts</h3></div>		<ul>
					<li>
				<a href="https://ehsanakhgari.org/blog/2017-07-07/quantum-flow-engineering-newsletter-15">Quantum Flow Engineering Newsletter #15</a>
						</li>
					<li>
				<a href="https://ehsanakhgari.org/blog/2017-06-23/quantum-flow-engineering-newsletter-14">Quantum Flow Engineering Newsletter #14</a>
						</li>
					<li>
				<a href="https://ehsanakhgari.org/blog/2017-06-16/quantum-flow-engineering-newsletter-13">Quantum Flow Engineering Newsletter #13</a>
						</li>
					<li>
				<a href="https://ehsanakhgari.org/blog/2017-06-09/quantum-flow-engineering-newsletter-12">Quantum Flow Engineering Newsletter #12</a>
						</li>
					<li>
				<a href="https://ehsanakhgari.org/blog/2017-06-02/quantum-flow-engineering-newsletter-11">Quantum Flow Engineering Newsletter #11</a>
						</li>
				</ul>
		</div>		<div id="recent-comments-2" class="widget-wrapper widget_recent_comments"><div class="widget-title"><h3>Recent Comments</h3></div><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link">Gerd</span> on <a href="https://ehsanakhgari.org/blog/2017-07-07/quantum-flow-engineering-newsletter-15#comment-3558">Quantum Flow Engineering Newsletter #15</a></li><li class="recentcomments"><span class="comment-author-link">ehsan</span> on <a href="https://ehsanakhgari.org/blog/2017-06-23/quantum-flow-engineering-newsletter-14#comment-3557">Quantum Flow Engineering Newsletter #14</a></li><li class="recentcomments"><span class="comment-author-link">mayank</span> on <a href="https://ehsanakhgari.org/blog/2017-06-23/quantum-flow-engineering-newsletter-14#comment-3556">Quantum Flow Engineering Newsletter #14</a></li><li class="recentcomments"><span class="comment-author-link">ehsan</span> on <a href="https://ehsanakhgari.org/blog/2017-06-23/quantum-flow-engineering-newsletter-14#comment-3555">Quantum Flow Engineering Newsletter #14</a></li><li class="recentcomments"><span class="comment-author-link">klop*cz</span> on <a href="https://ehsanakhgari.org/blog/2017-06-23/quantum-flow-engineering-newsletter-14#comment-3554">Quantum Flow Engineering Newsletter #14</a></li></ul></div><div id="archives-2" class="widget-wrapper widget_archive"><div class="widget-title"><h3>Archives</h3></div>		<ul>
			<li><a href='https://ehsanakhgari.org/2017/07'>July 2017</a></li>
	<li><a href='https://ehsanakhgari.org/2017/06'>June 2017</a></li>
	<li><a href='https://ehsanakhgari.org/2017/05'>May 2017</a></li>
	<li><a href='https://ehsanakhgari.org/2017/04'>April 2017</a></li>
	<li><a href='https://ehsanakhgari.org/2017/03'>March 2017</a></li>
	<li><a href='https://ehsanakhgari.org/2017/01'>January 2017</a></li>
	<li><a href='https://ehsanakhgari.org/2016/04'>April 2016</a></li>
	<li><a href='https://ehsanakhgari.org/2016/01'>January 2016</a></li>
	<li><a href='https://ehsanakhgari.org/2015/12'>December 2015</a></li>
	<li><a href='https://ehsanakhgari.org/2015/09'>September 2015</a></li>
	<li><a href='https://ehsanakhgari.org/2015/07'>July 2015</a></li>
	<li><a href='https://ehsanakhgari.org/2015/04'>April 2015</a></li>
	<li><a href='https://ehsanakhgari.org/2015/01'>January 2015</a></li>
	<li><a href='https://ehsanakhgari.org/2014/12'>December 2014</a></li>
	<li><a href='https://ehsanakhgari.org/2014/06'>June 2014</a></li>
	<li><a href='https://ehsanakhgari.org/2012/12'>December 2012</a></li>
	<li><a href='https://ehsanakhgari.org/2012/11'>November 2012</a></li>
	<li><a href='https://ehsanakhgari.org/2012/10'>October 2012</a></li>
	<li><a href='https://ehsanakhgari.org/2012/09'>September 2012</a></li>
	<li><a href='https://ehsanakhgari.org/2012/08'>August 2012</a></li>
	<li><a href='https://ehsanakhgari.org/2012/06'>June 2012</a></li>
	<li><a href='https://ehsanakhgari.org/2012/04'>April 2012</a></li>
	<li><a href='https://ehsanakhgari.org/2012/01'>January 2012</a></li>
	<li><a href='https://ehsanakhgari.org/2011/11'>November 2011</a></li>
	<li><a href='https://ehsanakhgari.org/2011/10'>October 2011</a></li>
	<li><a href='https://ehsanakhgari.org/2011/09'>September 2011</a></li>
	<li><a href='https://ehsanakhgari.org/2011/08'>August 2011</a></li>
	<li><a href='https://ehsanakhgari.org/2011/06'>June 2011</a></li>
	<li><a href='https://ehsanakhgari.org/2011/05'>May 2011</a></li>
	<li><a href='https://ehsanakhgari.org/2011/04'>April 2011</a></li>
	<li><a href='https://ehsanakhgari.org/2011/03'>March 2011</a></li>
	<li><a href='https://ehsanakhgari.org/2011/02'>February 2011</a></li>
	<li><a href='https://ehsanakhgari.org/2011/01'>January 2011</a></li>
	<li><a href='https://ehsanakhgari.org/2010/09'>September 2010</a></li>
	<li><a href='https://ehsanakhgari.org/2010/06'>June 2010</a></li>
	<li><a href='https://ehsanakhgari.org/2010/05'>May 2010</a></li>
	<li><a href='https://ehsanakhgari.org/2010/04'>April 2010</a></li>
	<li><a href='https://ehsanakhgari.org/2010/03'>March 2010</a></li>
	<li><a href='https://ehsanakhgari.org/2010/02'>February 2010</a></li>
	<li><a href='https://ehsanakhgari.org/2010/01'>January 2010</a></li>
	<li><a href='https://ehsanakhgari.org/2009/12'>December 2009</a></li>
	<li><a href='https://ehsanakhgari.org/2009/11'>November 2009</a></li>
	<li><a href='https://ehsanakhgari.org/2009/10'>October 2009</a></li>
	<li><a href='https://ehsanakhgari.org/2009/06'>June 2009</a></li>
	<li><a href='https://ehsanakhgari.org/2009/05'>May 2009</a></li>
	<li><a href='https://ehsanakhgari.org/2009/02'>February 2009</a></li>
	<li><a href='https://ehsanakhgari.org/2009/01'>January 2009</a></li>
	<li><a href='https://ehsanakhgari.org/2008/12'>December 2008</a></li>
	<li><a href='https://ehsanakhgari.org/2008/11'>November 2008</a></li>
	<li><a href='https://ehsanakhgari.org/2008/10'>October 2008</a></li>
	<li><a href='https://ehsanakhgari.org/2008/09'>September 2008</a></li>
	<li><a href='https://ehsanakhgari.org/2008/08'>August 2008</a></li>
	<li><a href='https://ehsanakhgari.org/2008/07'>July 2008</a></li>
	<li><a href='https://ehsanakhgari.org/2008/06'>June 2008</a></li>
	<li><a href='https://ehsanakhgari.org/2008/05'>May 2008</a></li>
		</ul>
		</div><div id="categories-2" class="widget-wrapper widget_categories"><div class="widget-title"><h3>Categories</h3></div>		<ul>
	<li class="cat-item cat-item-38"><a href="https://ehsanakhgari.org/category/blog" >Blog</a>
</li>
	<li class="cat-item cat-item-45"><a href="https://ehsanakhgari.org/category/extension" >Extension</a>
</li>
	<li class="cat-item cat-item-42"><a href="https://ehsanakhgari.org/category/article/miscellaneous" >Miscellaneous</a>
</li>
	<li class="cat-item cat-item-19"><a href="https://ehsanakhgari.org/category/article/php" >php</a>
</li>
	<li class="cat-item cat-item-40"><a href="https://ehsanakhgari.org/category/talks" >Talks</a>
</li>
	<li class="cat-item cat-item-41"><a href="https://ehsanakhgari.org/category/article/visual-c" >Visual C++</a>
</li>
		</ul>
</div><div id="meta-2" class="widget-wrapper widget_meta"><div class="widget-title"><h3>Meta</h3></div>			<ul>
						<li><a href="https://ehsanakhgari.org/wp-login.php">Log in</a></li>
			<li><a href="https://ehsanakhgari.org/feed">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="https://ehsanakhgari.org/comments/feed">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="https://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>			</ul>
			</div>
			</div><!-- end of #widgets -->
</div><!-- end of #wrapper -->
</div><!-- end of #container -->

<div id="footer" class="clearfix" role="contentinfo">
	
	<div id="footer-wrapper">

		
		<div class="grid col-940">

			<div class="grid col-540">
							</div><!-- end of col-540 -->

			<div class="grid col-380 fit">
				<ul class="social-icons"><li class="twitter-icon"><a href="https://twitter.com/ehsanakhgari"><img src="https://ehsanakhgari.org/wp-content/themes/responsive/core/icons/twitter-icon.png" width="24" height="24" alt="Twitter"></a></li><li class="linkedin-icon"><a href="http://www.linkedin.com/in/ehsanakhgari"><img src="https://ehsanakhgari.org/wp-content/themes/responsive/core/icons/linkedin-icon.png" width="24" height="24" alt="LinkedIn"></a></li></ul><!-- .social-icons -->			</div><!-- end of col-380 fit -->

		</div><!-- end of col-940 -->
		
		<div class="grid col-300 copyright">
			&copy; 2017<a id="copyright_link" href="https://ehsanakhgari.org/" title="Ehsan Akhgari">
				Ehsan Akhgari			</a>
		</div><!-- end of .copyright -->

		<div class="grid col-300 scroll-top"><a href="#scroll-top" title="scroll to top">&uarr;</a></div>

		<div class="grid col-300 fit powered">
			<a href="http://cyberchimps.com/responsive-theme/" title="Responsive Theme" rel="noindex, nofollow">Responsive Theme</a>
			powered by <a href="http://wordpress.org/" title="WordPress">
				WordPress</a>
		</div><!-- end .powered -->

	</div><!-- end #footer-wrapper -->

	</div><!-- end #footer -->

	<div style="display:none">
	<div class="grofile-hash-map-5aef682fbfd7590b9d85d6e8dbab10eb">
	</div>
	<div class="grofile-hash-map-13f8a0b49f6cf119bd3704751eae9a43">
	</div>
	</div>

	<script type="text/javascript">
		window.WPCOM_sharing_counts = {"https:\/\/ehsanakhgari.org\/blog\/2017-07-07\/quantum-flow-engineering-newsletter-15":1567};
	</script>
	<div id="sharing_email" style="display: none;">
		<form action="/blog/2017-07-07/quantum-flow-engineering-newsletter-15" method="post">
			<label for="target_email">Send to Email Address</label>
			<input type="email" name="target_email" id="target_email" value="" />

			
				<label for="source_name">Your Name</label>
				<input type="text" name="source_name" id="source_name" value="" />

				<label for="source_email">Your Email Address</label>
				<input type="email" name="source_email" id="source_email" value="" />

						<input type="text" id="jetpack-source_f_name" name="source_f_name" class="input" value="" size="25" autocomplete="off" title="This field is for validation and should not be changed" />
			<script>jQuery( document ).ready( function(){ document.getElementById('jetpack-source_f_name').value = '' });</script>
			
			<img style="float: right; display: none" class="loading" src="https://ehsanakhgari.org/wp-content/plugins/jetpack/modules/sharedaddy/images/loading.gif" alt="loading" width="16" height="16" />
			<input type="submit" value="Send Email" class="sharing_send" />
			<a rel="nofollow" href="#cancel" class="sharing_cancel">Cancel</a>

			<div class="errors errors-1" style="display: none;">
				Post was not sent - check your email addresses!			</div>

			<div class="errors errors-2" style="display: none;">
				Email check failed, please try again			</div>

			<div class="errors errors-3" style="display: none;">
				Sorry, your blog cannot share posts by email.			</div>
		</form>
	</div>
<script type='text/javascript' src='https://ehsanakhgari.org/wp-content/plugins/akismet/_inc/form.js?ver=3.3.2'></script>
<script type='text/javascript' src='https://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201728'></script>
<script type='text/javascript' src='https://secure.gravatar.com/js/gprofiles.js?ver=2017Julaa'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='https://ehsanakhgari.org/wp-content/plugins/jetpack/modules/wpgroho.js?ver=4.8'></script>
<script type='text/javascript' src='https://ehsanakhgari.org/wp-content/themes/responsive/core/js/responsive-scripts.min.js?ver=1.2.6'></script>
<script type='text/javascript' src='https://ehsanakhgari.org/wp-content/themes/responsive/core/js/jquery.placeholder.min.js?ver=2.0.7'></script>
<script type='text/javascript' src='https://ehsanakhgari.org/wp-includes/js/comment-reply.min.js?ver=4.8'></script>
<script type='text/javascript' src='https://ehsanakhgari.org/wp-includes/js/wp-embed.min.js?ver=4.8'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var sharing_js_options = {"lang":"en","counts":"1"};
/* ]]> */
</script>
<script type='text/javascript' src='https://ehsanakhgari.org/wp-content/plugins/jetpack/modules/sharedaddy/sharing.js?ver=5.1'></script>
<script type='text/javascript'>
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-twitter', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-facebook', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-google-plus-1', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomgoogle-plus-1', 'menubar=1,resizable=1,width=480,height=550' );
				return false;
			});
</script>

		<!--[if IE]>
		<script type="text/javascript">
		if ( 0 === window.location.hash.indexOf( '#comment-' ) ) {
			// window.location.reload() doesn't respect the Hash in IE
			window.location.hash = window.location.hash;
		}
		</script>
		<![endif]-->
		<script type="text/javascript">
			var comm_par_el = document.getElementById( 'comment_parent' ),
			    comm_par = (comm_par_el && comm_par_el.value) ? comm_par_el.value : '',
			    frame = document.getElementById( 'jetpack_remote_comment' ),
			    tellFrameNewParent;

			tellFrameNewParent = function() {
				if ( comm_par ) {
					frame.src = "https://jetpack.wordpress.com/jetpack-comment/?blogid=40037709&postid=1567&comment_registration=0&require_name_email=1&stc_enabled=1&stb_enabled=1&show_avatars=1&avatar_default=mystery&greeting=Leave+a+Reply&greeting_reply=Leave+a+Reply+to+%25s&color_scheme=light&lang=en_US&jetpack_version=5.1&sig=83a89d06aca17a08e1e72307671864af50805f12#parent=https%3A%2F%2Fehsanakhgari.org%2Fblog%2F2017-07-07%2Fquantum-flow-engineering-newsletter-15" + '&replytocom=' + parseInt( comm_par, 10 ).toString();
				} else {
					frame.src = "https://jetpack.wordpress.com/jetpack-comment/?blogid=40037709&postid=1567&comment_registration=0&require_name_email=1&stc_enabled=1&stb_enabled=1&show_avatars=1&avatar_default=mystery&greeting=Leave+a+Reply&greeting_reply=Leave+a+Reply+to+%25s&color_scheme=light&lang=en_US&jetpack_version=5.1&sig=83a89d06aca17a08e1e72307671864af50805f12#parent=https%3A%2F%2Fehsanakhgari.org%2Fblog%2F2017-07-07%2Fquantum-flow-engineering-newsletter-15";
				}
			};

	
			if ( 'undefined' !== typeof addComment ) {
				addComment._Jetpack_moveForm = addComment.moveForm;

				addComment.moveForm = function( commId, parentId, respondId, postId ) {
					var returnValue = addComment._Jetpack_moveForm( commId, parentId, respondId, postId ), cancelClick, cancel;

					if ( false === returnValue ) {
						cancel = document.getElementById( 'cancel-comment-reply-link' );
						cancelClick = cancel.onclick;
						cancel.onclick = function() {
							var cancelReturn = cancelClick.call( this );
							if ( false !== cancelReturn ) {
								return cancelReturn;
							}

							if ( !comm_par ) {
								return cancelReturn;
							}

							comm_par = 0;

							tellFrameNewParent();

							return cancelReturn;
						};
					}

					if ( comm_par == parentId ) {
						return returnValue;
					}

					comm_par = parentId;

					tellFrameNewParent();

					return returnValue;
				};
			}

	
			if ( window.postMessage ) {
				if ( document.addEventListener ) {
					window.addEventListener( 'message', function( event ) {
						if ( "https:\/\/jetpack.wordpress.com" !== event.origin ) {
							return;
						}

						jQuery( frame ).height( event.data );
					} );
				} else if ( document.attachEvent ) {
					window.attachEvent( 'message', function( event ) {
						if ( "https:\/\/jetpack.wordpress.com" !== event.origin ) {
							return;
						}

						jQuery( frame ).height( event.data );
					} );
				}
			}
		</script>

	<script type='text/javascript' src='https://stats.wp.com/e-201728.js' async defer></script>
<script type='text/javascript'>
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:5.1',blog:'40037709',post:'1567',tz:'0',srv:'ehsanakhgari.org'} ]);
	_stq.push([ 'clickTrackerInit', '40037709', '1567' ]);
</script>
</body>
</html>
